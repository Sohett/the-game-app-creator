{"remainingRequest":"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/babel-loader/lib/index.js!/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/src/services/api.js","dependencies":[{"path":"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/src/services/api.js","mtime":1568671295760},{"path":"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport \"core-js/modules/es6.array.map\";\nimport _Array$isArray from \"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/@babel/runtime-corejs2/core-js/array/is-array\";\nimport _Promise from \"/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport axios from 'axios';\nimport * as camelCaseKeys from 'camelcase-keys';\nimport { getIdToken } from './auth';\nvar SERVER_URL = 'https://api.the-game.website';\naxios.interceptors.request.use(function (config) {\n  console.log(config);\n}, function (error) {\n  return _Promise.reject(error);\n});\n\nvar formatResponse = function formatResponse(_ref) {\n  var rawData = _ref.data,\n      success = _ref.success,\n      message = _ref.message;\n  var data;\n\n  if (rawData) {\n    if (_Array$isArray(rawData)) {\n      data = rawData.map(function (x) {\n        return camelCaseKeys(x, {\n          deep: true\n        });\n      });\n    } else {\n      data = camelCaseKeys(rawData, {\n        deep: true\n      });\n    }\n  }\n\n  return {\n    data: data,\n    success: success,\n    message: message\n  };\n};\n\nvar API =\n/*#__PURE__*/\nfunction () {\n  function API() {\n    _classCallCheck(this, API);\n  }\n\n  _createClass(API, null, [{\n    key: \"headers\",\n    value: function headers() {\n      return {\n        'Authorization': \"Bearer \".concat(getIdToken()),\n        'Content-type': 'application/json'\n      };\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(endPoint) {\n        var params,\n            options,\n            response,\n            _args = arguments;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                params = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n                options = {\n                  baseURL: SERVER_URL,\n                  url: endPoint,\n                  method: 'GET',\n                  params: params,\n                  headers: this.headers()\n                };\n                _context.next = 4;\n                return axios(options);\n\n              case 4:\n                response = _context.sent;\n                console.log(response);\n                return _context.abrupt(\"return\", formatResponse(response));\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function get(_x) {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }]);\n\n  return API;\n}();\n\nexport default API;",{"version":3,"sources":["/Users/thomassohet/code/Sohett/perso/The Game/the-game-creator/src/services/api.js"],"names":["axios","camelCaseKeys","getIdToken","SERVER_URL","interceptors","request","use","config","console","log","error","reject","formatResponse","rawData","data","success","message","map","x","deep","API","endPoint","params","options","baseURL","url","method","headers","response"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,aAAZ,MAA+B,gBAA/B;AACA,SAASC,UAAT,QAA2B,QAA3B;AAEA,IAAMC,UAAU,GAAG,8BAAnB;AAEAH,KAAK,CAACI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAAUC,MAAV,EAAkB;AAACC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AAAoB,CADzC,EAEE,UAAUG,KAAV,EAAiB;AACf,SAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACD,CAJH;;AAOA,IAAME,cAAc,GAAG,SAAjBA,cAAiB,OAAyC;AAAA,MAAhCC,OAAgC,QAAtCC,IAAsC;AAAA,MAAvBC,OAAuB,QAAvBA,OAAuB;AAAA,MAAdC,OAAc,QAAdA,OAAc;AAC9D,MAAIF,IAAJ;;AACA,MAAID,OAAJ,EAAa;AACX,QAAI,eAAcA,OAAd,CAAJ,EAA4B;AAC1BC,MAAAA,IAAI,GAAGD,OAAO,CAACI,GAAR,CAAY,UAAAC,CAAC;AAAA,eAAIjB,aAAa,CAACiB,CAAD,EAAI;AAAEC,UAAAA,IAAI,EAAE;AAAR,SAAJ,CAAjB;AAAA,OAAb,CAAP;AACD,KAFD,MAEO;AACLL,MAAAA,IAAI,GAAGb,aAAa,CAACY,OAAD,EAAU;AAAEM,QAAAA,IAAI,EAAE;AAAR,OAAV,CAApB;AACD;AACF;;AAED,SAAO;AAAEL,IAAAA,IAAI,EAAJA,IAAF;AAAQC,IAAAA,OAAO,EAAPA,OAAR;AAAiBC,IAAAA,OAAO,EAAPA;AAAjB,GAAP;AACD,CAXD;;IAaMI,G;;;;;;;;;8BACc;AAChB,aAAO;AACL,0CAA2BlB,UAAU,EAArC,CADK;AAEL,wBAAgB;AAFX,OAAP;AAID;;;;;;+CAEiBmB,Q;;;;;;;;;AAAUC,gBAAAA,M,2DAAS,E;AAC7BC,gBAAAA,O,GAAU;AACdC,kBAAAA,OAAO,EAAErB,UADK;AAEdsB,kBAAAA,GAAG,EAAEJ,QAFS;AAGdK,kBAAAA,MAAM,EAAE,KAHM;AAIdJ,kBAAAA,MAAM,EAANA,MAJc;AAKdK,kBAAAA,OAAO,EAAE,KAAKA,OAAL;AALK,iB;;uBAOO3B,KAAK,CAACuB,OAAD,C;;;AAAtBK,gBAAAA,Q;AACNpB,gBAAAA,OAAO,CAACC,GAAR,CAAYmB,QAAZ;iDACOhB,cAAc,CAACgB,QAAD,C;;;;;;;;;;;;;;;;;;;;;AAIzB,eAAeR,GAAf","sourcesContent":["import axios from 'axios'\nimport * as camelCaseKeys from 'camelcase-keys'\nimport { getIdToken } from './auth'\n\nconst SERVER_URL = 'https://api.the-game.website'\n\naxios.interceptors.request.use(\n  function (config) {console.log(config)},\n  function (error) {\n    return Promise.reject(error)\n  }\n)\n\nconst formatResponse = ({ data: rawData, success, message }) => {\n  let data\n  if (rawData) {\n    if (Array.isArray(rawData)) {\n      data = rawData.map(x => camelCaseKeys(x, { deep: true }))\n    } else {\n      data = camelCaseKeys(rawData, { deep: true })\n    }\n  }\n\n  return { data, success, message }\n}\n\nclass API {\n  static headers () {\n    return {\n      'Authorization': `Bearer ${getIdToken()}`,\n      'Content-type': 'application/json'\n    }\n  }\n\n  static async get (endPoint, params = {}) {\n    const options = {\n      baseURL: SERVER_URL,\n      url: endPoint,\n      method: 'GET',\n      params,\n      headers: this.headers()\n    }\n    const response = await axios(options)\n    console.log(response)\n    return formatResponse(response)\n  }\n}\n\nexport default API\n"]}]}